{"remainingRequest":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\themes\\bubble.js","dependencies":[{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\themes\\bubble.js","mtime":1734253476689},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\babel.config.js","mtime":1734161096606},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1734253476057},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1734253476301}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gcmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkLmpzIikuZGVmYXVsdDsKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5CdWJibGVUb29sdGlwID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyIpOwp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIpKTsKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiKSk7CnZhciBfY2FsbFN1cGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jYWxsU3VwZXIuanMiKSk7CnZhciBfc3VwZXJQcm9wR2V0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zdXBlclByb3BHZXQuanMiKSk7CnZhciBfaW5oZXJpdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzLmpzIikpOwp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIpKTsKdmFyIF9sb2Rhc2hFcyA9IHJlcXVpcmUoImxvZGFzaC1lcyIpOwp2YXIgX2VtaXR0ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL2NvcmUvZW1pdHRlci5qcyIpKTsKdmFyIF9iYXNlID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgiLi9iYXNlLmpzIikpOwp2YXIgX3NlbGVjdGlvbiA9IHJlcXVpcmUoIi4uL2NvcmUvc2VsZWN0aW9uLmpzIik7CnZhciBfaWNvbnMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL3VpL2ljb25zLmpzIikpOwp2YXIgX3F1aWxsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9jb3JlL3F1aWxsLmpzIikpOwp2YXIgVE9PTEJBUl9DT05GSUcgPSBbWydib2xkJywgJ2l0YWxpYycsICdsaW5rJ10sIFt7CiAgaGVhZGVyOiAxCn0sIHsKICBoZWFkZXI6IDIKfSwgJ2Jsb2NrcXVvdGUnXV07CnZhciBCdWJibGVUb29sdGlwID0gZXhwb3J0cy5CdWJibGVUb29sdGlwID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQmFzZVRvb2x0aXApIHsKICBmdW5jdGlvbiBCdWJibGVUb29sdGlwKHF1aWxsLCBib3VuZHMpIHsKICAgIHZhciBfdGhpczsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIEJ1YmJsZVRvb2x0aXApOwogICAgX3RoaXMgPSAoMCwgX2NhbGxTdXBlcjIuZGVmYXVsdCkodGhpcywgQnViYmxlVG9vbHRpcCwgW3F1aWxsLCBib3VuZHNdKTsKICAgIF90aGlzLnF1aWxsLm9uKF9lbWl0dGVyLmRlZmF1bHQuZXZlbnRzLkVESVRPUl9DSEFOR0UsIGZ1bmN0aW9uICh0eXBlLCByYW5nZSwgb2xkUmFuZ2UsIHNvdXJjZSkgewogICAgICBpZiAodHlwZSAhPT0gX2VtaXR0ZXIuZGVmYXVsdC5ldmVudHMuU0VMRUNUSU9OX0NIQU5HRSkgcmV0dXJuOwogICAgICBpZiAocmFuZ2UgIT0gbnVsbCAmJiByYW5nZS5sZW5ndGggPiAwICYmIHNvdXJjZSA9PT0gX2VtaXR0ZXIuZGVmYXVsdC5zb3VyY2VzLlVTRVIpIHsKICAgICAgICBfdGhpcy5zaG93KCk7CiAgICAgICAgLy8gTG9jayBvdXIgd2lkdGggc28gd2Ugd2lsbCBleHBhbmQgYmV5b25kIG91ciBvZmZzZXRQYXJlbnQgYm91bmRhcmllcwogICAgICAgIF90aGlzLnJvb3Quc3R5bGUubGVmdCA9ICcwcHgnOwogICAgICAgIF90aGlzLnJvb3Quc3R5bGUud2lkdGggPSAnJzsKICAgICAgICBfdGhpcy5yb290LnN0eWxlLndpZHRoID0gIiIuY29uY2F0KF90aGlzLnJvb3Qub2Zmc2V0V2lkdGgsICJweCIpOwogICAgICAgIHZhciBsaW5lcyA9IF90aGlzLnF1aWxsLmdldExpbmVzKHJhbmdlLmluZGV4LCByYW5nZS5sZW5ndGgpOwogICAgICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIHZhciBfYm91bmRzID0gX3RoaXMucXVpbGwuZ2V0Qm91bmRzKHJhbmdlKTsKICAgICAgICAgIGlmIChfYm91bmRzICE9IG51bGwpIHsKICAgICAgICAgICAgX3RoaXMucG9zaXRpb24oX2JvdW5kcyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBsYXN0TGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdOwogICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMucXVpbGwuZ2V0SW5kZXgobGFzdExpbmUpOwogICAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGxhc3RMaW5lLmxlbmd0aCgpIC0gMSwgcmFuZ2UuaW5kZXggKyByYW5nZS5sZW5ndGggLSBpbmRleCk7CiAgICAgICAgICB2YXIgaW5kZXhCb3VuZHMgPSBfdGhpcy5xdWlsbC5nZXRCb3VuZHMobmV3IF9zZWxlY3Rpb24uUmFuZ2UoaW5kZXgsIGxlbmd0aCkpOwogICAgICAgICAgaWYgKGluZGV4Qm91bmRzICE9IG51bGwpIHsKICAgICAgICAgICAgX3RoaXMucG9zaXRpb24oaW5kZXhCb3VuZHMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBfdGhpcy50ZXh0Ym94ICYmIF90aGlzLnF1aWxsLmhhc0ZvY3VzKCkpIHsKICAgICAgICBfdGhpcy5oaWRlKCk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIF90aGlzOwogIH0KICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShCdWJibGVUb29sdGlwLCBfQmFzZVRvb2x0aXApOwogIHJldHVybiAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShCdWJibGVUb29sdGlwLCBbewogICAga2V5OiAibGlzdGVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoQnViYmxlVG9vbHRpcCwgImxpc3RlbiIsIHRoaXMsIDMpKFtdKTsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBGaXggbWUgbGF0ZXIKICAgICAgdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJy5xbC1jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5yb290LmNsYXNzTGlzdC5yZW1vdmUoJ3FsLWVkaXRpbmcnKTsKICAgICAgfSk7CiAgICAgIHRoaXMucXVpbGwub24oX2VtaXR0ZXIuZGVmYXVsdC5ldmVudHMuU0NST0xMX09QVElNSVpFLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gTGV0IHNlbGVjdGlvbiBiZSByZXN0b3JlZCBieSB0b29sYmFyIGhhbmRsZXJzIGJlZm9yZSByZXBvc2l0aW9uaW5nCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLnJvb3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdxbC1oaWRkZW4nKSkgcmV0dXJuOwogICAgICAgICAgdmFyIHJhbmdlID0gX3RoaXMyLnF1aWxsLmdldFNlbGVjdGlvbigpOwogICAgICAgICAgaWYgKHJhbmdlICE9IG51bGwpIHsKICAgICAgICAgICAgdmFyIGJvdW5kcyA9IF90aGlzMi5xdWlsbC5nZXRCb3VuZHMocmFuZ2UpOwogICAgICAgICAgICBpZiAoYm91bmRzICE9IG51bGwpIHsKICAgICAgICAgICAgICBfdGhpczIucG9zaXRpb24oYm91bmRzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIDEpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5jZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5zaG93KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uKHJlZmVyZW5jZSkgewogICAgICB2YXIgc2hpZnQgPSAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoQnViYmxlVG9vbHRpcCwgInBvc2l0aW9uIiwgdGhpcywgMykoW3JlZmVyZW5jZV0pOwogICAgICB2YXIgYXJyb3cgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLnFsLXRvb2x0aXAtYXJyb3cnKTsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICBhcnJvdy5zdHlsZS5tYXJnaW5MZWZ0ID0gJyc7CiAgICAgIGlmIChzaGlmdCAhPT0gMCkgewogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICBhcnJvdy5zdHlsZS5tYXJnaW5MZWZ0ID0gIiIuY29uY2F0KC0xICogc2hpZnQgLSBhcnJvdy5vZmZzZXRXaWR0aCAvIDIsICJweCIpOwogICAgICB9CiAgICAgIHJldHVybiBzaGlmdDsKICAgIH0KICB9XSk7Cn0oX2Jhc2UuQmFzZVRvb2x0aXApOwooMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShCdWJibGVUb29sdGlwLCAiVEVNUExBVEUiLCBbJzxzcGFuIGNsYXNzPSJxbC10b29sdGlwLWFycm93Ij48L3NwYW4+JywgJzxkaXYgY2xhc3M9InFsLXRvb2x0aXAtZWRpdG9yIj4nLCAnPGlucHV0IHR5cGU9InRleHQiIGRhdGEtZm9ybXVsYT0iZT1tY14yIiBkYXRhLWxpbms9Imh0dHBzOi8vcXVpbGxqcy5jb20iIGRhdGEtdmlkZW89IkVtYmVkIFVSTCI+JywgJzxhIGNsYXNzPSJxbC1jbG9zZSI+PC9hPicsICc8L2Rpdj4nXS5qb2luKCcnKSk7CnZhciBCdWJibGVUaGVtZSA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Jhc2VUaGVtZSkgewogIGZ1bmN0aW9uIEJ1YmJsZVRoZW1lKHF1aWxsLCBvcHRpb25zKSB7CiAgICB2YXIgX3RoaXMzOwogICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgQnViYmxlVGhlbWUpOwogICAgaWYgKG9wdGlvbnMubW9kdWxlcy50b29sYmFyICE9IG51bGwgJiYgb3B0aW9ucy5tb2R1bGVzLnRvb2xiYXIuY29udGFpbmVyID09IG51bGwpIHsKICAgICAgb3B0aW9ucy5tb2R1bGVzLnRvb2xiYXIuY29udGFpbmVyID0gVE9PTEJBUl9DT05GSUc7CiAgICB9CiAgICBfdGhpczMgPSAoMCwgX2NhbGxTdXBlcjIuZGVmYXVsdCkodGhpcywgQnViYmxlVGhlbWUsIFtxdWlsbCwgb3B0aW9uc10pOwogICAgX3RoaXMzLnF1aWxsLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdxbC1idWJibGUnKTsKICAgIHJldHVybiBfdGhpczM7CiAgfQogICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKEJ1YmJsZVRoZW1lLCBfQmFzZVRoZW1lKTsKICByZXR1cm4gKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoQnViYmxlVGhlbWUsIFt7CiAgICBrZXk6ICJleHRlbmRUb29sYmFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBleHRlbmRUb29sYmFyKHRvb2xiYXIpIHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICB0aGlzLnRvb2x0aXAgPSBuZXcgQnViYmxlVG9vbHRpcCh0aGlzLnF1aWxsLCB0aGlzLm9wdGlvbnMuYm91bmRzKTsKICAgICAgaWYgKHRvb2xiYXIuY29udGFpbmVyICE9IG51bGwpIHsKICAgICAgICB0aGlzLnRvb2x0aXAucm9vdC5hcHBlbmRDaGlsZCh0b29sYmFyLmNvbnRhaW5lcik7CiAgICAgICAgdGhpcy5idWlsZEJ1dHRvbnModG9vbGJhci5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyksIF9pY29ucy5kZWZhdWx0KTsKICAgICAgICB0aGlzLmJ1aWxkUGlja2Vycyh0b29sYmFyLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKSwgX2ljb25zLmRlZmF1bHQpOwogICAgICB9CiAgICB9CiAgfV0pOwp9KF9iYXNlLmRlZmF1bHQpOwpCdWJibGVUaGVtZS5ERUZBVUxUUyA9ICgwLCBfbG9kYXNoRXMubWVyZ2UpKHt9LCBfYmFzZS5kZWZhdWx0LkRFRkFVTFRTLCB7CiAgbW9kdWxlczogewogICAgdG9vbGJhcjogewogICAgICBoYW5kbGVyczogewogICAgICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsodmFsdWUpIHsKICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5xdWlsbC5mb3JtYXQoJ2xpbmsnLCBmYWxzZSwgX3F1aWxsLmRlZmF1bHQuc291cmNlcy5VU0VSKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICAgICAgdGhpcy5xdWlsbC50aGVtZS50b29sdGlwLmVkaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0pOw=="},{"version":3,"names":["_lodashEs","require","_emitter","_interopRequireDefault","_base","_interopRequireWildcard","_selection","_icons","_quill","TOOLBAR_CONFIG","header","BubbleTooltip","exports","_BaseTooltip","quill","bounds","_this","_classCallCheck2","default","_callSuper2","on","Emitter","events","EDITOR_CHANGE","type","range","oldRange","source","SELECTION_CHANGE","length","sources","USER","show","root","style","left","width","concat","offsetWidth","lines","getLines","index","getBounds","position","lastLine","getIndex","Math","min","indexBounds","Range","document","activeElement","textbox","hasFocus","hide","_inherits2","_createClass2","key","value","listen","_this2","_superPropGet2","querySelector","addEventListener","classList","remove","SCROLL_OPTIMIZE","setTimeout","contains","getSelection","cancel","reference","shift","arrow","marginLeft","BaseTooltip","_defineProperty2","join","BubbleTheme","_BaseTheme","options","_this3","modules","toolbar","container","add","extendToolbar","tooltip","appendChild","buildButtons","querySelectorAll","icons","buildPickers","BaseTheme","DEFAULTS","merge","handlers","link","format","Quill","theme","edit"],"sources":["../../src/themes/bubble.ts"],"sourcesContent":["import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport type { Bounds } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\n];\n\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<span class=\"ql-tooltip-arrow\"></span>',\n    '<div class=\"ql-tooltip-editor\">',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-close\"></a>',\n    '</div>',\n  ].join('');\n\n  constructor(quill: Quill, bounds?: HTMLElement) {\n    super(quill, bounds);\n    this.quill.on(\n      Emitter.events.EDITOR_CHANGE,\n      (type, range, oldRange, source) => {\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\n        if (\n          range != null &&\n          range.length > 0 &&\n          source === Emitter.sources.USER\n        ) {\n          this.show();\n          // Lock our width so we will expand beyond our offsetParent boundaries\n          this.root.style.left = '0px';\n          this.root.style.width = '';\n          this.root.style.width = `${this.root.offsetWidth}px`;\n          const lines = this.quill.getLines(range.index, range.length);\n          if (lines.length === 1) {\n            const bounds = this.quill.getBounds(range);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n          } else {\n            const lastLine = lines[lines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(\n              lastLine.length() - 1,\n              range.index + range.length - index,\n            );\n            const indexBounds = this.quill.getBounds(new Range(index, length));\n            if (indexBounds != null) {\n              this.position(indexBounds);\n            }\n          }\n        } else if (\n          document.activeElement !== this.textbox &&\n          this.quill.hasFocus()\n        ) {\n          this.hide();\n        }\n      },\n    );\n  }\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference: Bounds) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\n\nclass BubbleTheme extends BaseTheme {\n  tooltip: BubbleTooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild<HTMLElement>(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport { BubbleTooltip, BubbleTheme as default };\n"],"mappings":"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","ignoreList":[]}]}