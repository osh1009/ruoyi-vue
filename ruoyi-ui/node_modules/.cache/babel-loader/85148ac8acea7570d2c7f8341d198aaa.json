{"remainingRequest":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\formats\\image.js","dependencies":[{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\formats\\image.js","mtime":1734253478182},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\babel.config.js","mtime":1734161096606},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1734253476057},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1734253476301}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiKTsKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiKSk7CnZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIikpOwp2YXIgX2NhbGxTdXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2FsbFN1cGVyLmpzIikpOwp2YXIgX3N1cGVyUHJvcEdldDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc3VwZXJQcm9wR2V0LmpzIikpOwp2YXIgX2luaGVyaXRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIpKTsKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiKSk7CnZhciBfcGFyY2htZW50ID0gcmVxdWlyZSgicGFyY2htZW50Iik7CnZhciBfbGluayA9IHJlcXVpcmUoIi4vbGluay5qcyIpOwp2YXIgQVRUUklCVVRFUyA9IFsnYWx0JywgJ2hlaWdodCcsICd3aWR0aCddOwp2YXIgSW1hZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbWJlZEJsb3QpIHsKICBmdW5jdGlvbiBJbWFnZSgpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIEltYWdlKTsKICAgIHJldHVybiAoMCwgX2NhbGxTdXBlcjIuZGVmYXVsdCkodGhpcywgSW1hZ2UsIGFyZ3VtZW50cyk7CiAgfQogICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKEltYWdlLCBfRW1iZWRCbG90KTsKICByZXR1cm4gKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoSW1hZ2UsIFt7CiAgICBrZXk6ICJmb3JtYXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdChuYW1lLCB2YWx1ZSkgewogICAgICBpZiAoQVRUUklCVVRFUy5pbmRleE9mKG5hbWUpID4gLTEpIHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIHRoaXMuZG9tTm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRvbU5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoSW1hZ2UsICJmb3JtYXQiLCB0aGlzLCAzKShbbmFtZSwgdmFsdWVdKTsKICAgICAgfQogICAgfQogIH1dLCBbewogICAga2V5OiAiY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUpIHsKICAgICAgdmFyIG5vZGUgPSAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoSW1hZ2UsICJjcmVhdGUiLCB0aGlzLCAyKShbdmFsdWVdKTsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5zYW5pdGl6ZSh2YWx1ZSkpOwogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0sIHsKICAgIGtleTogImZvcm1hdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdHMoZG9tTm9kZSkgewogICAgICByZXR1cm4gQVRUUklCVVRFUy5yZWR1Y2UoZnVuY3Rpb24gKGZvcm1hdHMsIGF0dHJpYnV0ZSkgewogICAgICAgIGlmIChkb21Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUpKSB7CiAgICAgICAgICBmb3JtYXRzW2F0dHJpYnV0ZV0gPSBkb21Ob2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZm9ybWF0czsKICAgICAgfSwge30pOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtYXRjaCh1cmwpIHsKICAgICAgcmV0dXJuIC9cLihqcGU/Z3xnaWZ8cG5nKSQvLnRlc3QodXJsKSB8fCAvXmRhdGE6aW1hZ2VcLy4rO2Jhc2U2NC8udGVzdCh1cmwpOwogICAgfQogIH0sIHsKICAgIGtleTogInNhbml0aXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYW5pdGl6ZSh1cmwpIHsKICAgICAgcmV0dXJuICgwLCBfbGluay5zYW5pdGl6ZSkodXJsLCBbJ2h0dHAnLCAnaHR0cHMnLCAnZGF0YSddKSA/IHVybCA6ICcvLzowJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoZG9tTm9kZSkgewogICAgICByZXR1cm4gZG9tTm9kZS5nZXRBdHRyaWJ1dGUoJ3NyYycpOwogICAgfQogIH1dKTsKfShfcGFyY2htZW50LkVtYmVkQmxvdCk7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEltYWdlLCAiYmxvdE5hbWUiLCAnaW1hZ2UnKTsKKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoSW1hZ2UsICJ0YWdOYW1lIiwgJ0lNRycpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSBJbWFnZTs="},{"version":3,"names":["_parchment","require","_link","ATTRIBUTES","Image","_EmbedBlot","_classCallCheck2","default","_callSuper2","arguments","_inherits2","_createClass2","key","value","format","name","indexOf","domNode","setAttribute","removeAttribute","_superPropGet2","create","node","sanitize","formats","reduce","attribute","hasAttribute","getAttribute","match","url","test","EmbedBlot","_defineProperty2","_default","exports"],"sources":["../../src/formats/image.ts"],"sourcesContent":["import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static match(url: string) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLImageElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\n\nexport default Image;\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAEA,IAAME,UAAU,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC;AAAA,IAEvCC,KAAK,0BAAAC,UAAA;EAAA,SAAAD,MAAA;IAAA,IAAAE,gBAAA,CAAAC,OAAA,QAAAH,KAAA;IAAA,WAAAI,WAAA,CAAAD,OAAA,QAAAH,KAAA,EAAAK,SAAA;EAAA;EAAA,IAAAC,UAAA,CAAAH,OAAA,EAAAH,KAAA,EAAAC,UAAA;EAAA,WAAAM,aAAA,CAAAJ,OAAA,EAAAH,KAAA;IAAAQ,GAAA;IAAAC,KAAA,EAsCT,SAAAC,MAAMA,CAACC,IAAY,EAAEF,KAAa,EAAE;MAClC,IAAIV,UAAU,CAACa,OAAO,CAACD,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;QACjC,IAAIF,KAAK,EAAE;UACT,IAAI,CAACI,OAAO,CAACC,YAAY,CAACH,IAAI,EAAEF,KAAK,CAAC;QACxC,CAAC,MAAM;UACL,IAAI,CAACI,OAAO,CAACE,eAAe,CAACJ,IAAI,CAAC;QACpC;MACF,CAAC,MAAM;QACL,IAAAK,cAAA,CAAAb,OAAA,EAAAH,KAAA,sBAAaW,IAAI,EAAEF,KAAK;MAC1B;IACF;EAAA;IAAAD,GAAA;IAAAC,KAAA,EA5CA,SAAOQ,MAAMA,CAACR,KAAa,EAAE;MAC3B,IAAMS,IAAI,OAAAF,cAAA,CAAAb,OAAA,EAAAH,KAAA,sBAAgBS,KAAK,EAAY;MAC3C,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;QAC7BS,IAAI,CAACJ,YAAY,CAAC,KAAK,EAAE,IAAI,CAACK,QAAQ,CAACV,KAAK,CAAC,CAAC;MAChD;MACA,OAAOS,IAAI;IACb;EAAA;IAAAV,GAAA;IAAAC,KAAA,EAEA,SAAOW,OAAOA,CAACP,OAAgB,EAAE;MAC/B,OAAOd,UAAU,CAACsB,MAAM,CACtB,UAACD,OAAsC,EAAEE,SAAS,EAAK;QACrD,IAAIT,OAAO,CAACU,YAAY,CAACD,SAAS,CAAC,EAAE;UACnCF,OAAO,CAACE,SAAS,CAAC,GAAGT,OAAO,CAACW,YAAY,CAACF,SAAS,CAAC;QACtD;QACA,OAAOF,OAAO;MAChB,CAAC,EACD,CAAC,CACH,CAAC;IACH;EAAA;IAAAZ,GAAA;IAAAC,KAAA,EAEA,SAAOgB,KAAKA,CAACC,GAAW,EAAE;MACxB,OAAO,oBAAoB,CAACC,IAAI,CAACD,GAAG,CAAC,IAAI,wBAAwB,CAACC,IAAI,CAACD,GAAG,CAAC;IAC7E;EAAA;IAAAlB,GAAA;IAAAC,KAAA,EAEA,SAAOU,QAAQA,CAACO,GAAW,EAAE;MAC3B,OAAO,IAAAP,cAAQ,EAACO,GAAG,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,GAAGA,GAAG,GAAG,MAAM;IAChE;EAAA;IAAAlB,GAAA;IAAAC,KAAA,EAEA,SAAOA,KAAKA,CAACI,OAAgB,EAAE;MAC7B,OAAOA,OAAO,CAACW,YAAY,CAAC,KAAK,CAAC;IACpC;EAAA;AAAA,EAlCkBI,oBAAS;AAAA,IAAAC,gBAAA,CAAA1B,OAAA,EAAvBH,KAAK,cACS,OAAO;AAAA,IAAA6B,gBAAA,CAAA1B,OAAA,EADrBH,KAAK,aAEQ,KAAK;AAAA,IAAA8B,QAAA,GAAAC,OAAA,CAAA5B,OAAA,GAiDTH,KAAK","ignoreList":[]}]}