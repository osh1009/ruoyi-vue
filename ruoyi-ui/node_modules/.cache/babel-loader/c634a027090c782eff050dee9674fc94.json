{"remainingRequest":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\core\\composition.js","dependencies":[{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\core\\composition.js","mtime":1734253476917},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\babel.config.js","mtime":1734161096606},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1734253476057},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1734253476301}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuZmluZC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnF1ZXVlLW1pY3JvdGFzay5qcyIpOwp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIpKTsKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiKSk7CnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzIikpOwp2YXIgX2VtYmVkID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9ibG90cy9lbWJlZC5qcyIpKTsKdmFyIF9lbWl0dGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2VtaXR0ZXIuanMiKSk7CnZhciBDb21wb3NpdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ29tcG9zaXRpb24oc2Nyb2xsLCBlbWl0dGVyKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBDb21wb3NpdGlvbik7CiAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiaXNDb21wb3NpbmciLCBmYWxzZSk7CiAgICB0aGlzLnNjcm9sbCA9IHNjcm9sbDsKICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7CiAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7CiAgfQogIHJldHVybiAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShDb21wb3NpdGlvbiwgW3sKICAgIGtleTogInNldHVwTGlzdGVuZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cExpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5zY3JvbGwuZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKCFfdGhpcy5pc0NvbXBvc2luZykgewogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tcG9zaXRpb25TdGFydChldmVudCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5zY3JvbGwuZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmIChfdGhpcy5pc0NvbXBvc2luZykgewogICAgICAgICAgLy8gV2Via2l0IG1ha2VzIERPTSBjaGFuZ2VzIGFmdGVyIGNvbXBvc2l0aW9uZW5kLCBzbyB3ZSB1c2UgbWljcm90YXNrIHRvCiAgICAgICAgICAvLyBlbnN1cmUgdGhlIG9yZGVyLgogICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTMxOTAyCiAgICAgICAgICBxdWV1ZU1pY3JvdGFzayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmhhbmRsZUNvbXBvc2l0aW9uRW5kKGV2ZW50KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlQ29tcG9zaXRpb25TdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ29tcG9zaXRpb25TdGFydChldmVudCkgewogICAgICB2YXIgYmxvdCA9IGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIE5vZGUgPyB0aGlzLnNjcm9sbC5maW5kKGV2ZW50LnRhcmdldCwgdHJ1ZSkgOiBudWxsOwogICAgICBpZiAoYmxvdCAmJiAhKGJsb3QgaW5zdGFuY2VvZiBfZW1iZWQuZGVmYXVsdCkpIHsKICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdChfZW1pdHRlci5kZWZhdWx0LmV2ZW50cy5DT01QT1NJVElPTl9CRUZPUkVfU1RBUlQsIGV2ZW50KTsKICAgICAgICB0aGlzLnNjcm9sbC5iYXRjaFN0YXJ0KCk7CiAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoX2VtaXR0ZXIuZGVmYXVsdC5ldmVudHMuQ09NUE9TSVRJT05fU1RBUlQsIGV2ZW50KTsKICAgICAgICB0aGlzLmlzQ29tcG9zaW5nID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUNvbXBvc2l0aW9uRW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDb21wb3NpdGlvbkVuZChldmVudCkgewogICAgICB0aGlzLmVtaXR0ZXIuZW1pdChfZW1pdHRlci5kZWZhdWx0LmV2ZW50cy5DT01QT1NJVElPTl9CRUZPUkVfRU5ELCBldmVudCk7CiAgICAgIHRoaXMuc2Nyb2xsLmJhdGNoRW5kKCk7CiAgICAgIHRoaXMuZW1pdHRlci5lbWl0KF9lbWl0dGVyLmRlZmF1bHQuZXZlbnRzLkNPTVBPU0lUSU9OX0VORCwgZXZlbnQpOwogICAgICB0aGlzLmlzQ29tcG9zaW5nID0gZmFsc2U7CiAgICB9CiAgfV0pOwp9KCk7CnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IENvbXBvc2l0aW9uOw=="},{"version":3,"names":["_embed","_interopRequireDefault","require","_emitter","Composition","scroll","emitter","_classCallCheck2","default","_defineProperty2","setupListeners","_createClass2","key","value","_this","domNode","addEventListener","event","isComposing","handleCompositionStart","queueMicrotask","handleCompositionEnd","blot","target","Node","find","Embed","emit","Emitter","events","COMPOSITION_BEFORE_START","batchStart","COMPOSITION_START","COMPOSITION_BEFORE_END","batchEnd","COMPOSITION_END","_default","exports"],"sources":["../../src/core/composition.ts"],"sourcesContent":["import Embed from '../blots/embed.js';\nimport type Scroll from '../blots/scroll.js';\nimport Emitter from './emitter.js';\n\nclass Composition {\n  isComposing = false;\n\n  constructor(\n    private scroll: Scroll,\n    private emitter: Emitter,\n  ) {\n    this.setupListeners();\n  }\n\n  private setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', (event) => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n\n    this.scroll.domNode.addEventListener('compositionend', (event) => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n\n  private handleCompositionStart(event: CompositionEvent) {\n    const blot =\n      event.target instanceof Node\n        ? this.scroll.find(event.target, true)\n        : null;\n\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n\n  private handleCompositionEnd(event: CompositionEvent) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\n\nexport default Composition;\n"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,QAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAkC,IAE5BE,WAAW;EAGf,SAAAA,YACUC,MAAc,EACdC,OAAgB,EACxB;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAJ,WAAA;IAAA,IAAAK,gBAAA,CAAAD,OAAA,uBALY,KAAK;IAKjB,KAFQH,MAAc,GAAdA,MAAc;IAAA,KACdC,OAAgB,GAAhBA,OAAgB;IAExB,IAAI,CAACI,cAAc,CAAC,CAAC;EACvB;EAAA,WAAAC,aAAA,CAAAH,OAAA,EAAAJ,WAAA;IAAAQ,GAAA;IAAAC,KAAA,EAEQ,SAAAH,cAAcA,CAAA,EAAG;MAAA,IAAAI,KAAA;MACvB,IAAI,CAACT,MAAM,CAACU,OAAO,CAACC,gBAAgB,CAAC,kBAAkB,EAAG,UAAAC,KAAK,EAAK;QAClE,IAAI,CAACH,KAAI,CAACI,WAAW,EAAE;UACrBJ,KAAI,CAACK,sBAAsB,CAACF,KAAK,CAAC;QACpC;MACF,CAAC,CAAC;MAEF,IAAI,CAACZ,MAAM,CAACU,OAAO,CAACC,gBAAgB,CAAC,gBAAgB,EAAG,UAAAC,KAAK,EAAK;QAChE,IAAIH,KAAI,CAACI,WAAW,EAAE;UACpB;UACA;UACA;UACAE,cAAc,CAAC,YAAM;YACnBN,KAAI,CAACO,oBAAoB,CAACJ,KAAK,CAAC;UAClC,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ;EAAA;IAAAL,GAAA;IAAAC,KAAA,EAEQ,SAAAM,sBAAsBA,CAACF,KAAuB,EAAE;MACtD,IAAMK,IAAI,GACRL,KAAK,CAACM,MAAM,YAAYC,IAAI,GACxB,IAAI,CAACnB,MAAM,CAACoB,IAAI,CAACR,KAAK,CAACM,MAAM,EAAE,IAAI,CAAC,GACpC,IAAI;MAEV,IAAID,IAAI,IAAI,EAAEA,IAAI,YAAYI,cAAK,CAAC,EAAE;QACpC,IAAI,CAACpB,OAAO,CAACqB,IAAI,CAACC,gBAAO,CAACC,MAAM,CAACC,wBAAwB,EAAEb,KAAK,CAAC;QACjE,IAAI,CAACZ,MAAM,CAAC0B,UAAU,CAAC,CAAC;QACxB,IAAI,CAACzB,OAAO,CAACqB,IAAI,CAACC,gBAAO,CAACC,MAAM,CAACG,iBAAiB,EAAEf,KAAK,CAAC;QAC1D,IAAI,CAACC,WAAW,GAAG,IAAI;MACzB;IACF;EAAA;IAAAN,GAAA;IAAAC,KAAA,EAEQ,SAAAQ,oBAAoBA,CAACJ,KAAuB,EAAE;MACpD,IAAI,CAACX,OAAO,CAACqB,IAAI,CAACC,gBAAO,CAACC,MAAM,CAACI,sBAAsB,EAAEhB,KAAK,CAAC;MAC/D,IAAI,CAACZ,MAAM,CAAC6B,QAAQ,CAAC,CAAC;MACtB,IAAI,CAAC5B,OAAO,CAACqB,IAAI,CAACC,gBAAO,CAACC,MAAM,CAACM,eAAe,EAAElB,KAAK,CAAC;MACxD,IAAI,CAACC,WAAW,GAAG,KAAK;IAC1B;EAAA;AAAA;AAAA,IAAAkB,QAAA,GAAAC,OAAA,CAAA7B,OAAA,GAGaJ,WAAW","ignoreList":[]}]}