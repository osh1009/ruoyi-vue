{"remainingRequest":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\modules\\syntax.js","dependencies":[{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\quill\\modules\\syntax.js","mtime":1734253479748},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\babel.config.js","mtime":1734161096606},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1734253476057},{"path":"E:\\workSpace\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1734253476301}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gcmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkLmpzIikuZGVmYXVsdDsKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5Db2RlVG9rZW4gPSBleHBvcnRzLkNvZGVCbG9jayA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuZmlsdGVyLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuZmluZC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IubWFwLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IucmVkdWNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzIikpOwp2YXIgX3NsaWNlZFRvQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXkuanMiKSk7CnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIikpOwp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIpKTsKdmFyIF9jYWxsU3VwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3JrU3BhY2UvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NhbGxTdXBlci5qcyIpKTsKdmFyIF9pbmhlcml0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3dvcmtTcGFjZS9SdW9ZaS1WdWUvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMuanMiKSk7CnZhciBfc3VwZXJQcm9wR2V0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya1NwYWNlL1J1b1lpLVZ1ZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zdXBlclByb3BHZXQuanMiKSk7CnZhciBfcXVpbGxEZWx0YSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicXVpbGwtZGVsdGEiKSk7CnZhciBfcGFyY2htZW50ID0gcmVxdWlyZSgicGFyY2htZW50Iik7CnZhciBfaW5saW5lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9ibG90cy9pbmxpbmUuanMiKSk7CnZhciBfcXVpbGwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL2NvcmUvcXVpbGwuanMiKSk7CnZhciBfbW9kdWxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9jb3JlL21vZHVsZS5qcyIpKTsKdmFyIF9ibG9jayA9IHJlcXVpcmUoIi4uL2Jsb3RzL2Jsb2NrLmpzIik7CnZhciBfYnJlYWsgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL2Jsb3RzL2JyZWFrLmpzIikpOwp2YXIgX2N1cnNvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vYmxvdHMvY3Vyc29yLmpzIikpOwp2YXIgX3RleHQgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCIuLi9ibG90cy90ZXh0LmpzIikpOwp2YXIgX2NvZGUgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCIuLi9mb3JtYXRzL2NvZGUuanMiKSk7CnZhciBfY2xpcGJvYXJkID0gcmVxdWlyZSgiLi9jbGlwYm9hcmQuanMiKTsKdmFyIFRva2VuQXR0cmlidXRvciA9IG5ldyBfcGFyY2htZW50LkNsYXNzQXR0cmlidXRvcignY29kZS10b2tlbicsICdobGpzJywgewogIHNjb3BlOiBfcGFyY2htZW50LlNjb3BlLklOTElORQp9KTsKdmFyIENvZGVUb2tlbiA9IGV4cG9ydHMuQ29kZVRva2VuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfSW5saW5lKSB7CiAgZnVuY3Rpb24gQ29kZVRva2VuKHNjcm9sbCwgZG9tTm9kZSwgdmFsdWUpIHsKICAgIHZhciBfdGhpczsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIENvZGVUb2tlbik7CiAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICBfdGhpcyA9ICgwLCBfY2FsbFN1cGVyMi5kZWZhdWx0KSh0aGlzLCBDb2RlVG9rZW4sIFtzY3JvbGwsIGRvbU5vZGUsIHZhbHVlXSk7CiAgICBUb2tlbkF0dHJpYnV0b3IuYWRkKF90aGlzLmRvbU5vZGUsIHZhbHVlKTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgKDAsIF9pbmhlcml0czIuZGVmYXVsdCkoQ29kZVRva2VuLCBfSW5saW5lKTsKICByZXR1cm4gKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoQ29kZVRva2VuLCBbewogICAga2V5OiAiZm9ybWF0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtYXQoX2Zvcm1hdCwgdmFsdWUpIHsKICAgICAgaWYgKF9mb3JtYXQgIT09IENvZGVUb2tlbi5ibG90TmFtZSkgewogICAgICAgICgwLCBfc3VwZXJQcm9wR2V0Mi5kZWZhdWx0KShDb2RlVG9rZW4sICJmb3JtYXQiLCB0aGlzLCAzKShbX2Zvcm1hdCwgdmFsdWVdKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSkgewogICAgICAgIFRva2VuQXR0cmlidXRvci5hZGQodGhpcy5kb21Ob2RlLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVG9rZW5BdHRyaWJ1dG9yLnJlbW92ZSh0aGlzLmRvbU5vZGUpOwogICAgICAgIHRoaXMuZG9tTm9kZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc3RhdGljcy5jbGFzc05hbWUpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib3B0aW1pemUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wdGltaXplKCkgewogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICgwLCBfc3VwZXJQcm9wR2V0Mi5kZWZhdWx0KShDb2RlVG9rZW4sICJvcHRpbWl6ZSIsIHRoaXMsIDMpKGFyZ3VtZW50cyk7CiAgICAgIGlmICghVG9rZW5BdHRyaWJ1dG9yLnZhbHVlKHRoaXMuZG9tTm9kZSkpIHsKICAgICAgICB0aGlzLnVud3JhcCgpOwogICAgICB9CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJmb3JtYXRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtYXRzKG5vZGUsIHNjcm9sbCkgewogICAgICB3aGlsZSAobm9kZSAhPSBudWxsICYmIG5vZGUgIT09IHNjcm9sbC5kb21Ob2RlKSB7CiAgICAgICAgaWYgKG5vZGUuY2xhc3NMaXN0ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKF9jb2RlLmRlZmF1bHQuY2xhc3NOYW1lKSkgewogICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICAgICAgcmV0dXJuICgwLCBfc3VwZXJQcm9wR2V0Mi5kZWZhdWx0KShDb2RlVG9rZW4sICJmb3JtYXRzIiwgdGhpcywgMikoW25vZGUsIHNjcm9sbF0pOwogICAgICAgIH0KICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTsKICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogIH1dKTsKfShfaW5saW5lLmRlZmF1bHQpOwpDb2RlVG9rZW4uYmxvdE5hbWUgPSAnY29kZS10b2tlbic7CkNvZGVUb2tlbi5jbGFzc05hbWUgPSAncWwtdG9rZW4nOwp2YXIgU3ludGF4Q29kZUJsb2NrID0gZXhwb3J0cy5Db2RlQmxvY2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db2RlQmxvY2spIHsKICBmdW5jdGlvbiBTeW50YXhDb2RlQmxvY2soKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBTeW50YXhDb2RlQmxvY2spOwogICAgcmV0dXJuICgwLCBfY2FsbFN1cGVyMi5kZWZhdWx0KSh0aGlzLCBTeW50YXhDb2RlQmxvY2ssIGFyZ3VtZW50cyk7CiAgfQogICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKFN5bnRheENvZGVCbG9jaywgX0NvZGVCbG9jayk7CiAgcmV0dXJuICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKFN5bnRheENvZGVCbG9jaywgW3sKICAgIGtleTogImZvcm1hdCIsCiAgICB2YWx1ZToKICAgIC8vIFN5bnRheCBtb2R1bGUgd2lsbCByZWdpc3RlcgoKICAgIGZ1bmN0aW9uIGZvcm1hdChuYW1lLCB2YWx1ZSkgewogICAgICBpZiAobmFtZSA9PT0gdGhpcy5zdGF0aWNzLmJsb3ROYW1lICYmIHZhbHVlKSB7CiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICAgIHRoaXMuZG9tTm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGFuZ3VhZ2UnLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgKDAsIF9zdXBlclByb3BHZXQyLmRlZmF1bHQpKFN5bnRheENvZGVCbG9jaywgImZvcm1hdCIsIHRoaXMsIDMpKFtuYW1lLCB2YWx1ZV0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVwbGFjZVdpdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGxhY2VXaXRoKG5hbWUsIHZhbHVlKSB7CiAgICAgIHRoaXMuZm9ybWF0QXQoMCwgdGhpcy5sZW5ndGgoKSwgQ29kZVRva2VuLmJsb3ROYW1lLCBmYWxzZSk7CiAgICAgIHJldHVybiAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoU3ludGF4Q29kZUJsb2NrLCAicmVwbGFjZVdpdGgiLCB0aGlzLCAzKShbbmFtZSwgdmFsdWVdKTsKICAgIH0KICB9XSwgW3sKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlKSB7CiAgICAgIHZhciBkb21Ob2RlID0gKDAsIF9zdXBlclByb3BHZXQyLmRlZmF1bHQpKFN5bnRheENvZGVCbG9jaywgImNyZWF0ZSIsIHRoaXMsIDIpKFt2YWx1ZV0pOwogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgIGRvbU5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWxhbmd1YWdlJywgdmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiBkb21Ob2RlOwogICAgfQogIH0sIHsKICAgIGtleTogImZvcm1hdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdHMoZG9tTm9kZSkgewogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIHJldHVybiBkb21Ob2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5ndWFnZScpIHx8ICdwbGFpbic7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKCkge30KICB9XSk7Cn0oX2NvZGUuZGVmYXVsdCk7CnZhciBTeW50YXhDb2RlQmxvY2tDb250YWluZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db2RlQmxvY2tDb250YWluZXIpIHsKICBmdW5jdGlvbiBTeW50YXhDb2RlQmxvY2tDb250YWluZXIoKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBTeW50YXhDb2RlQmxvY2tDb250YWluZXIpOwogICAgcmV0dXJuICgwLCBfY2FsbFN1cGVyMi5kZWZhdWx0KSh0aGlzLCBTeW50YXhDb2RlQmxvY2tDb250YWluZXIsIGFyZ3VtZW50cyk7CiAgfQogICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKFN5bnRheENvZGVCbG9ja0NvbnRhaW5lciwgX0NvZGVCbG9ja0NvbnRhaW5lcik7CiAgcmV0dXJuICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKFN5bnRheENvZGVCbG9ja0NvbnRhaW5lciwgW3sKICAgIGtleTogImF0dGFjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXR0YWNoKCkgewogICAgICAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyLCAiYXR0YWNoIiwgdGhpcywgMykoW10pOwogICAgICB0aGlzLmZvcmNlTmV4dCA9IGZhbHNlOwogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIHRoaXMuc2Nyb2xsLmVtaXRNb3VudCh0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb3JtYXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdChuYW1lLCB2YWx1ZSkgewogICAgICBpZiAobmFtZSA9PT0gU3ludGF4Q29kZUJsb2NrLmJsb3ROYW1lKSB7CiAgICAgICAgdGhpcy5mb3JjZU5leHQgPSB0cnVlOwogICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICAgIGNoaWxkLmZvcm1hdChuYW1lLCB2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb3JtYXRBdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybWF0QXQoaW5kZXgsIGxlbmd0aCwgbmFtZSwgdmFsdWUpIHsKICAgICAgaWYgKG5hbWUgPT09IFN5bnRheENvZGVCbG9jay5ibG90TmFtZSkgewogICAgICAgIHRoaXMuZm9yY2VOZXh0ID0gdHJ1ZTsKICAgICAgfQogICAgICAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyLCAiZm9ybWF0QXQiLCB0aGlzLCAzKShbaW5kZXgsIGxlbmd0aCwgbmFtZSwgdmFsdWVdKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWdobGlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhpZ2hsaWdodChfaGlnaGxpZ2h0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgZm9yY2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgaWYgKHRoaXMuY2hpbGRyZW4uaGVhZCA9PSBudWxsKSByZXR1cm47CiAgICAgIHZhciBub2RlcyA9IEFycmF5LmZyb20odGhpcy5kb21Ob2RlLmNoaWxkTm9kZXMpLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgewogICAgICAgIHJldHVybiBub2RlICE9PSBfdGhpczIudWlOb2RlOwogICAgICB9KTsKICAgICAgdmFyIHRleHQgPSAiIi5jb25jYXQobm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgcmV0dXJuIG5vZGUudGV4dENvbnRlbnQ7CiAgICAgIH0pLmpvaW4oJ1xuJyksICJcbiIpOwogICAgICB2YXIgbGFuZ3VhZ2UgPSBTeW50YXhDb2RlQmxvY2suZm9ybWF0cyh0aGlzLmNoaWxkcmVuLmhlYWQuZG9tTm9kZSk7CiAgICAgIGlmIChmb3JjZWQgfHwgdGhpcy5mb3JjZU5leHQgfHwgdGhpcy5jYWNoZWRUZXh0ICE9PSB0ZXh0KSB7CiAgICAgICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA+IDAgfHwgdGhpcy5jYWNoZWRUZXh0ID09IG51bGwpIHsKICAgICAgICAgIHZhciBvbGREZWx0YSA9IHRoaXMuY2hpbGRyZW4ucmVkdWNlKGZ1bmN0aW9uIChkZWx0YSwgY2hpbGQpIHsKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICAgICAgICByZXR1cm4gZGVsdGEuY29uY2F0KCgwLCBfYmxvY2suYmxvY2tEZWx0YSkoY2hpbGQsIGZhbHNlKSk7CiAgICAgICAgICB9LCBuZXcgX3F1aWxsRGVsdGEuZGVmYXVsdCgpKTsKICAgICAgICAgIHZhciBkZWx0YSA9IF9oaWdobGlnaHQodGV4dCwgbGFuZ3VhZ2UpOwogICAgICAgICAgb2xkRGVsdGEuZGlmZihkZWx0YSkucmVkdWNlKGZ1bmN0aW9uIChpbmRleCwgX3JlZikgewogICAgICAgICAgICB2YXIgcmV0YWluID0gX3JlZi5yZXRhaW4sCiAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IF9yZWYuYXR0cmlidXRlczsKICAgICAgICAgICAgLy8gU2hvdWxkIGJlIGFsbCByZXRhaW5zCiAgICAgICAgICAgIGlmICghcmV0YWluKSByZXR1cm4gaW5kZXg7CiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoZm9ybWF0KSB7CiAgICAgICAgICAgICAgICBpZiAoW1N5bnRheENvZGVCbG9jay5ibG90TmFtZSwgQ29kZVRva2VuLmJsb3ROYW1lXS5pbmNsdWRlcyhmb3JtYXQpKSB7CiAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICAgICAgICAgICAgX3RoaXMyLmZvcm1hdEF0KGluZGV4LCByZXRhaW4sIGZvcm1hdCwgYXR0cmlidXRlc1tmb3JtYXRdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgICAgIHJldHVybiBpbmRleCArIHJldGFpbjsKICAgICAgICAgIH0sIDApOwogICAgICAgIH0KICAgICAgICB0aGlzLmNhY2hlZFRleHQgPSB0ZXh0OwogICAgICAgIHRoaXMuZm9yY2VOZXh0ID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJodG1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBodG1sKGluZGV4LCBsZW5ndGgpIHsKICAgICAgdmFyIF90aGlzJGNoaWxkcmVuJGZpbmQgPSB0aGlzLmNoaWxkcmVuLmZpbmQoaW5kZXgpLAogICAgICAgIF90aGlzJGNoaWxkcmVuJGZpbmQyID0gKDAsIF9zbGljZWRUb0FycmF5Mi5kZWZhdWx0KShfdGhpcyRjaGlsZHJlbiRmaW5kLCAxKSwKICAgICAgICBjb2RlQmxvY2sgPSBfdGhpcyRjaGlsZHJlbiRmaW5kMlswXTsKICAgICAgdmFyIGxhbmd1YWdlID0gY29kZUJsb2NrID8gU3ludGF4Q29kZUJsb2NrLmZvcm1hdHMoY29kZUJsb2NrLmRvbU5vZGUpIDogJ3BsYWluJzsKICAgICAgcmV0dXJuICI8cHJlIGRhdGEtbGFuZ3VhZ2U9XCIiLmNvbmNhdChsYW5ndWFnZSwgIlwiPlxuIikuY29uY2F0KCgwLCBfdGV4dC5lc2NhcGVUZXh0KSh0aGlzLmNvZGUoaW5kZXgsIGxlbmd0aCkpLCAiXG48L3ByZT4iKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcHRpbWl6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3B0aW1pemUoY29udGV4dCkgewogICAgICAoMCwgX3N1cGVyUHJvcEdldDIuZGVmYXVsdCkoU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyLCAib3B0aW1pemUiLCB0aGlzLCAzKShbY29udGV4dF0pOwogICAgICBpZiAodGhpcy5wYXJlbnQgIT0gbnVsbCAmJiB0aGlzLmNoaWxkcmVuLmhlYWQgIT0gbnVsbCAmJiB0aGlzLnVpTm9kZSAhPSBudWxsKSB7CiAgICAgICAgdmFyIGxhbmd1YWdlID0gU3ludGF4Q29kZUJsb2NrLmZvcm1hdHModGhpcy5jaGlsZHJlbi5oZWFkLmRvbU5vZGUpOwogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICBpZiAobGFuZ3VhZ2UgIT09IHRoaXMudWlOb2RlLnZhbHVlKSB7CiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgICB0aGlzLnVpTm9kZS52YWx1ZSA9IGxhbmd1YWdlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH1dKTsKfShfY29kZS5Db2RlQmxvY2tDb250YWluZXIpOwpTeW50YXhDb2RlQmxvY2tDb250YWluZXIuYWxsb3dlZENoaWxkcmVuID0gW1N5bnRheENvZGVCbG9ja107ClN5bnRheENvZGVCbG9jay5yZXF1aXJlZENvbnRhaW5lciA9IFN5bnRheENvZGVCbG9ja0NvbnRhaW5lcjsKU3ludGF4Q29kZUJsb2NrLmFsbG93ZWRDaGlsZHJlbiA9IFtDb2RlVG9rZW4sIF9jdXJzb3IuZGVmYXVsdCwgX3RleHQuZGVmYXVsdCwgX2JyZWFrLmRlZmF1bHRdOwp2YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24gaGlnaGxpZ2h0KGxpYiwgbGFuZ3VhZ2UsIHRleHQpIHsKICBpZiAodHlwZW9mIGxpYi52ZXJzaW9uU3RyaW5nID09PSAnc3RyaW5nJykgewogICAgdmFyIG1ham9yVmVyc2lvbiA9IGxpYi52ZXJzaW9uU3RyaW5nLnNwbGl0KCcuJylbMF07CiAgICBpZiAocGFyc2VJbnQobWFqb3JWZXJzaW9uLCAxMCkgPj0gMTEpIHsKICAgICAgcmV0dXJuIGxpYi5oaWdobGlnaHQodGV4dCwgewogICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZQogICAgICB9KS52YWx1ZTsKICAgIH0KICB9CiAgcmV0dXJuIGxpYi5oaWdobGlnaHQobGFuZ3VhZ2UsIHRleHQpLnZhbHVlOwp9Owp2YXIgU3ludGF4ID0gZXhwb3J0cy5kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTW9kdWxlKSB7CiAgZnVuY3Rpb24gU3ludGF4KHF1aWxsLCBvcHRpb25zKSB7CiAgICB2YXIgX3RoaXMzOwogICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgU3ludGF4KTsKICAgIF90aGlzMyA9ICgwLCBfY2FsbFN1cGVyMi5kZWZhdWx0KSh0aGlzLCBTeW50YXgsIFtxdWlsbCwgb3B0aW9uc10pOwogICAgaWYgKF90aGlzMy5vcHRpb25zLmhsanMgPT0gbnVsbCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N5bnRheCBtb2R1bGUgcmVxdWlyZXMgaGlnaGxpZ2h0LmpzLiBQbGVhc2UgaW5jbHVkZSB0aGUgbGlicmFyeSBvbiB0aGUgcGFnZSBiZWZvcmUgUXVpbGwuJyk7CiAgICB9CiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEZpeCBtZSBsYXRlcgogICAgX3RoaXMzLmxhbmd1YWdlcyA9IF90aGlzMy5vcHRpb25zLmxhbmd1YWdlcy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIF9yZWYyKSB7CiAgICAgIHZhciBrZXkgPSBfcmVmMi5rZXk7CiAgICAgIG1lbW9ba2V5XSA9IHRydWU7CiAgICAgIHJldHVybiBtZW1vOwogICAgfSwge30pOwogICAgX3RoaXMzLmhpZ2hsaWdodEJsb3QgPSBfdGhpczMuaGlnaGxpZ2h0QmxvdC5iaW5kKF90aGlzMyk7CiAgICBfdGhpczMuaW5pdExpc3RlbmVyKCk7CiAgICBfdGhpczMuaW5pdFRpbWVyKCk7CiAgICByZXR1cm4gX3RoaXMzOwogIH0KICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShTeW50YXgsIF9Nb2R1bGUpOwogIHJldHVybiAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShTeW50YXgsIFt7CiAgICBrZXk6ICJpbml0TGlzdGVuZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRMaXN0ZW5lcigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMucXVpbGwub24oX3F1aWxsLmRlZmF1bHQuZXZlbnRzLlNDUk9MTF9CTE9UX01PVU5ULCBmdW5jdGlvbiAoYmxvdCkgewogICAgICAgIGlmICghKGJsb3QgaW5zdGFuY2VvZiBTeW50YXhDb2RlQmxvY2tDb250YWluZXIpKSByZXR1cm47CiAgICAgICAgdmFyIHNlbGVjdCA9IF90aGlzNC5xdWlsbC5yb290Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7CiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBGaXggbWUgbGF0ZXIKICAgICAgICBfdGhpczQub3B0aW9ucy5sYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgIHZhciBrZXkgPSBfcmVmMy5rZXksCiAgICAgICAgICAgIGxhYmVsID0gX3JlZjMubGFiZWw7CiAgICAgICAgICB2YXIgb3B0aW9uID0gc2VsZWN0Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBsYWJlbDsKICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywga2V5KTsKICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICAgIH0pOwogICAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBibG90LmZvcm1hdChTeW50YXhDb2RlQmxvY2suYmxvdE5hbWUsIHNlbGVjdC52YWx1ZSk7CiAgICAgICAgICBfdGhpczQucXVpbGwucm9vdC5mb2N1cygpOyAvLyBQcmV2ZW50IHNjcm9sbGluZwogICAgICAgICAgX3RoaXM0LmhpZ2hsaWdodChibG90LCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoYmxvdC51aU5vZGUgPT0gbnVsbCkgewogICAgICAgICAgYmxvdC5hdHRhY2hVSShzZWxlY3QpOwogICAgICAgICAgaWYgKGJsb3QuY2hpbGRyZW4uaGVhZCkgewogICAgICAgICAgICBzZWxlY3QudmFsdWUgPSBTeW50YXhDb2RlQmxvY2suZm9ybWF0cyhibG90LmNoaWxkcmVuLmhlYWQuZG9tTm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0VGltZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRUaW1lcigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHZhciB0aW1lciA9IG51bGw7CiAgICAgIHRoaXMucXVpbGwub24oX3F1aWxsLmRlZmF1bHQuZXZlbnRzLlNDUk9MTF9PUFRJTUlaRSwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aW1lcikgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB9CiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNS5oaWdobGlnaHQoKTsKICAgICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICB9LCBfdGhpczUub3B0aW9ucy5pbnRlcnZhbCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImhpZ2hsaWdodCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGlnaGxpZ2h0KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIGJsb3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7CiAgICAgIHZhciBmb3JjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIGlmICh0aGlzLnF1aWxsLnNlbGVjdGlvbi5jb21wb3NpbmcpIHJldHVybjsKICAgICAgdGhpcy5xdWlsbC51cGRhdGUoX3F1aWxsLmRlZmF1bHQuc291cmNlcy5VU0VSKTsKICAgICAgdmFyIHJhbmdlID0gdGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKTsKICAgICAgdmFyIGJsb3RzID0gYmxvdCA9PSBudWxsID8gdGhpcy5xdWlsbC5zY3JvbGwuZGVzY2VuZGFudHMoU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyKSA6IFtibG90XTsKICAgICAgYmxvdHMuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgY29udGFpbmVyLmhpZ2hsaWdodChfdGhpczYuaGlnaGxpZ2h0QmxvdCwgZm9yY2UpOwogICAgICB9KTsKICAgICAgdGhpcy5xdWlsbC51cGRhdGUoX3F1aWxsLmRlZmF1bHQuc291cmNlcy5TSUxFTlQpOwogICAgICBpZiAocmFuZ2UgIT0gbnVsbCkgewogICAgICAgIHRoaXMucXVpbGwuc2V0U2VsZWN0aW9uKHJhbmdlLCBfcXVpbGwuZGVmYXVsdC5zb3VyY2VzLlNJTEVOVCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWdobGlnaHRCbG90IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWdobGlnaHRCbG90KHRleHQpIHsKICAgICAgdmFyIGxhbmd1YWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAncGxhaW4nOwogICAgICBsYW5ndWFnZSA9IHRoaXMubGFuZ3VhZ2VzW2xhbmd1YWdlXSA/IGxhbmd1YWdlIDogJ3BsYWluJzsKICAgICAgaWYgKGxhbmd1YWdlID09PSAncGxhaW4nKSB7CiAgICAgICAgcmV0dXJuICgwLCBfdGV4dC5lc2NhcGVUZXh0KSh0ZXh0KS5zcGxpdCgnXG4nKS5yZWR1Y2UoZnVuY3Rpb24gKGRlbHRhLCBsaW5lLCBpKSB7CiAgICAgICAgICBpZiAoaSAhPT0gMCkgewogICAgICAgICAgICBkZWx0YS5pbnNlcnQoJ1xuJywgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoe30sIF9jb2RlLmRlZmF1bHQuYmxvdE5hbWUsIGxhbmd1YWdlKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZGVsdGEuaW5zZXJ0KGxpbmUpOwogICAgICAgIH0sIG5ldyBfcXVpbGxEZWx0YS5kZWZhdWx0KCkpOwogICAgICB9CiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnF1aWxsLnJvb3Qub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoX2NvZGUuZGVmYXVsdC5jbGFzc05hbWUpOwogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaGlnaGxpZ2h0KHRoaXMub3B0aW9ucy5obGpzLCBsYW5ndWFnZSwgdGV4dCk7CiAgICAgIHJldHVybiAoMCwgX2NsaXBib2FyZC50cmF2ZXJzZSkodGhpcy5xdWlsbC5zY3JvbGwsIGNvbnRhaW5lciwgW2Z1bmN0aW9uIChub2RlLCBkZWx0YSkgewogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICB2YXIgdmFsdWUgPSBUb2tlbkF0dHJpYnV0b3IudmFsdWUobm9kZSk7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gZGVsdGEuY29tcG9zZShuZXcgX3F1aWxsRGVsdGEuZGVmYXVsdCgpLnJldGFpbihkZWx0YS5sZW5ndGgoKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoe30sIENvZGVUb2tlbi5ibG90TmFtZSwgdmFsdWUpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBkZWx0YTsKICAgICAgfV0sIFtmdW5jdGlvbiAobm9kZSwgZGVsdGEpIHsKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YS5zcGxpdCgnXG4nKS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIG5vZGVUZXh0LCBpKSB7CiAgICAgICAgICBpZiAoaSAhPT0gMCkgbWVtby5pbnNlcnQoJ1xuJywgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoe30sIF9jb2RlLmRlZmF1bHQuYmxvdE5hbWUsIGxhbmd1YWdlKSk7CiAgICAgICAgICByZXR1cm4gbWVtby5pbnNlcnQobm9kZVRleHQpOwogICAgICAgIH0sIGRlbHRhKTsKICAgICAgfV0sIG5ldyBXZWFrTWFwKCkpOwogICAgfQogIH1dLCBbewogICAga2V5OiAicmVnaXN0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKCkgewogICAgICBfcXVpbGwuZGVmYXVsdC5yZWdpc3RlcihDb2RlVG9rZW4sIHRydWUpOwogICAgICBfcXVpbGwuZGVmYXVsdC5yZWdpc3RlcihTeW50YXhDb2RlQmxvY2ssIHRydWUpOwogICAgICBfcXVpbGwuZGVmYXVsdC5yZWdpc3RlcihTeW50YXhDb2RlQmxvY2tDb250YWluZXIsIHRydWUpOwogICAgfQogIH1dKTsKfShfbW9kdWxlLmRlZmF1bHQpOwpTeW50YXguREVGQVVMVFMgPSB7CiAgaGxqczogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHdpbmRvdy5obGpzOwogIH0oKSwKICBpbnRlcnZhbDogMTAwMCwKICBsYW5ndWFnZXM6IFt7CiAgICBrZXk6ICdwbGFpbicsCiAgICBsYWJlbDogJ1BsYWluJwogIH0sIHsKICAgIGtleTogJ2Jhc2gnLAogICAgbGFiZWw6ICdCYXNoJwogIH0sIHsKICAgIGtleTogJ2NwcCcsCiAgICBsYWJlbDogJ0MrKycKICB9LCB7CiAgICBrZXk6ICdjcycsCiAgICBsYWJlbDogJ0MjJwogIH0sIHsKICAgIGtleTogJ2NzcycsCiAgICBsYWJlbDogJ0NTUycKICB9LCB7CiAgICBrZXk6ICdkaWZmJywKICAgIGxhYmVsOiAnRGlmZicKICB9LCB7CiAgICBrZXk6ICd4bWwnLAogICAgbGFiZWw6ICdIVE1ML1hNTCcKICB9LCB7CiAgICBrZXk6ICdqYXZhJywKICAgIGxhYmVsOiAnSmF2YScKICB9LCB7CiAgICBrZXk6ICdqYXZhc2NyaXB0JywKICAgIGxhYmVsOiAnSmF2YVNjcmlwdCcKICB9LCB7CiAgICBrZXk6ICdtYXJrZG93bicsCiAgICBsYWJlbDogJ01hcmtkb3duJwogIH0sIHsKICAgIGtleTogJ3BocCcsCiAgICBsYWJlbDogJ1BIUCcKICB9LCB7CiAgICBrZXk6ICdweXRob24nLAogICAgbGFiZWw6ICdQeXRob24nCiAgfSwgewogICAga2V5OiAncnVieScsCiAgICBsYWJlbDogJ1J1YnknCiAgfSwgewogICAga2V5OiAnc3FsJywKICAgIGxhYmVsOiAnU1FMJwogIH1dCn07"},{"version":3,"names":["_quillDelta","_interopRequireDefault","require","_parchment","_inline","_quill","_module","_block","_break","_cursor","_text","_interopRequireWildcard","_code","_clipboard","TokenAttributor","ClassAttributor","scope","Scope","INLINE","CodeToken","exports","_Inline","scroll","domNode","value","_this","_classCallCheck2","default","_callSuper2","add","_inherits2","_createClass2","key","format","blotName","_superPropGet2","remove","classList","statics","className","optimize","arguments","unwrap","formats","node","contains","CodeBlock","parentNode","undefined","Inline","SyntaxCodeBlock","_CodeBlock","name","setAttribute","replaceWith","formatAt","length","create","getAttribute","register","SyntaxCodeBlockContainer","_CodeBlockContainer","attach","forceNext","emitMount","children","forEach","child","index","highlight","_this2","forced","head","nodes","Array","from","childNodes","filter","uiNode","text","concat","map","textContent","join","language","cachedText","trim","oldDelta","reduce","delta","blockDelta","Delta","diff","_ref","retain","attributes","Object","keys","includes","html","_this$children$find","find","_this$children$find2","_slicedToArray2","codeBlock","escapeText","code","context","parent","CodeBlockContainer","allowedChildren","requiredContainer","CursorBlot","TextBlot","BreakBlot","lib","versionString","majorVersion","split","parseInt","Syntax","_Module","quill","options","_this3","hljs","Error","languages","memo","_ref2","highlightBlot","bind","initListener","initTimer","_this4","on","Quill","events","SCROLL_BLOT_MOUNT","blot","select","root","ownerDocument","createElement","_ref3","label","option","appendChild","addEventListener","focus","attachUI","_this5","timer","SCROLL_OPTIMIZE","clearTimeout","setTimeout","interval","_this6","force","selection","composing","update","sources","USER","range","getSelection","blots","descendants","container","SILENT","setSelection","line","i","insert","_defineProperty2","innerHTML","traverse","compose","data","nodeText","WeakMap","Module","DEFAULTS","window"],"sources":["../../src/modules/syntax.ts"],"sourcesContent":["import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport type { Blot, ScrollBlot } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node: Element, scroll: ScrollBlot) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll: ScrollBlot, domNode: Node, value: unknown) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format: string, value: unknown) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args: unknown[]) {\n    // @ts-expect-error\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value: unknown) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode: Node) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  format(name: string, value: unknown) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  forceNext?: boolean;\n  cachedText?: string | null;\n\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach((child) => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(\n    highlight: (text: string, language: string) => Delta,\n    forced = false,\n  ) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      (node) => node !== this.uiNode,\n    );\n    const text = `${nodes.map((node) => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach((format) => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index: number, length: number) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock\n      ? SyntaxCodeBlock.formats(codeBlock.domNode)\n      : 'plain';\n\n    return `<pre data-language=\"${language}\">\\n${escapeText(\n      this.code(index, length),\n    )}\\n</pre>`;\n  }\n\n  optimize(context: Record<string, any>) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\ninterface SyntaxOptions {\n  interval: number;\n  languages: { key: string; label: string }[];\n  hljs: any;\n}\n\nconst highlight = (lib: any, language: string, text: string) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, { language }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\n\nclass Syntax extends Module<SyntaxOptions> {\n  static DEFAULTS: SyntaxOptions & { hljs: any };\n\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  languages: Record<string, true>;\n\n  constructor(quill: Quill, options: Partial<SyntaxOptions>) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce(\n      (memo: Record<string, unknown>, { key }) => {\n        memo[key] = true;\n        return memo;\n      },\n      {},\n    );\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, (blot: Blot) => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer: ReturnType<typeof setTimeout> | null = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot: SyntaxCodeBlockContainer | null = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach((container) => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text: string, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text)\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'JavaScript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n"],"mappings":"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","ignoreList":[]}]}